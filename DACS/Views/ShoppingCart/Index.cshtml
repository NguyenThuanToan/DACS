@model IEnumerable<DACS.Models.CartModel>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div style="background-color: white; margin: 73px 150px 0 150px; padding: 20px 20px 0 20px; min-height: 650px;">
    <div>
        <h2>
            @*<span>
                GIỎ HÀNG
            </span>*@
        </h2>
    </div>
    <div>
        <div style="display: flex; flex-direction: row; justify-content: space-between; align-items:flex-start; width: 100%">
            <div class="leftContainer" style="display: flex; flex-direction: column; width: 62.5%">
                <ol style="padding-left: 0">
                    @foreach (var item in Model)
                    {
                        <li style="margin: 0 auto 16px auto; padding: 0 0; border-bottom: 1px solid #dadada; text-align: match-parent; list-style: none">
                            <div style="; padding: 0; margin: 0; display: block">
                                <div style="; margin: 0; padding-bottom: 28px">
                                    <div style="min-height: 1.6em; ">
                                        <div style="display: flex; justify-content: space-between">
                                            <div style="width: 100%; display: flex; margin: 28px 0;">
                                                <div style="flex-basis: 28%">
                                                    <a href="@Url.Action("Details","Product",new { id = item.IdProduct })">
                                                        <div style="margin-bottom: 16px;">
                                                            <img src="~/Content/images/@item.ImageProduct" style="display: block; width:400px; height:100px" />
                                                        </div>
                                                    </a>
                                                </div>
                                                @using (Html.BeginForm("UpdateCart", "ShoppingCart", new { id = item.IdProduct }))
                                                {
                                                    <div style="flex: 1; display: flex; flex-direction: column; justify-content: space-between; width: 514px">
                                                        <div style="display: flex; justify-content: space-between">
                                                            <div style="flex: 1; padding: 0 0 0 20px">
                                                                <a href="@Url.Action("Details","Product",new { id = item.IdProduct })" style="text-decoration: none; color: #1b1b1b; font-weight: bold">@item.NameProduct</a>
                                                                <div class="date" style="display:flex;flex-direction:row">
                                                                    <span style="width: auto; margin-bottom: 16px; font-weight: bold">Ngày sản xuất:@item.manufacturedate</span>
                                                                </div>
                                                                <div class="date" style="display:flex;flex-direction:row">
                                                                    <span style="width: auto; margin-bottom: 16px; font-weight: bold">Hạn sử dụng:@item.expiry</span>
                                                                    </div>

                                                                    <div style="margin-bottom: 0; margin: 16px 0 8px; align-items: flex-end; display: flex">
                                                                        <span>Giá:@String.Format("{0:0,0}", item.Price)VND</span>
                                                                    </div>
                                                                </div>
                                                            <div style="display: flex; flex-direction: row; justify-content: space-between; align-items: flex-start; ">
                                                                @Html.ActionLink("Xóa", "RemoveCartItem", new { id = item.IdProduct })
                                                            </div>
                                                        </div>
                                                        <div style="display: flex; justify-content: space-between; align-items: center">
                                                            <div style="; margin-left: 20px; margin-top: 12px; margin-right: 0; width: 134px; display: flex">
                                                                <div style="">
                                                                    <span style="width: auto; margin-bottom: 16px; font-weight: bold">SỐ LƯỢNG</span>
                                                                    <div>
                                                                        <input class="form-control" type="number" min="1" name="txtQuantity" value="@item.Quantity" style="margin-top: 16px; width: 75%; border-radius: 5px; border: none;" />
                                                                        <input class="form-control" type="submit" value="Cập nhật" style="margin: 5px 0; width: 75%; border-radius: 5px; border: none; " />
                                                                    </div>
                                                                </div>
                                                                
                                                            </div>
                                                            <div style="; display: flex; justify-content: flex-end; height: 18px; margin-top: 28px">
                                                                <span>
                                                                    <div style="margin: 0; align-items: baseline; display: flex; flex-flow: wrap; flex-direction: initial; flex-wrap: wrap;">
                                                                        <dd style="font-size: x-large; font-weight: bold; font-family: sans-serif">TỔNG</dd>
                                                                        <dt style="font-size: x-large; font-weight: bold; font-family: sans-serif">:  @String.Format("{0:0,0}", item.TotalMoney)VND</dt>
                                                                    </div>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    }
                </ol>
            </div>
            <div class="rightContainer" style="display: flex; flex-direction: column; position: sticky; top: 93px; height: fit-content; width: 31.25%">
                <div style=" padding: 28px 20px; border: 1px solid #e0e0e0">
                    <div style=" justify-content: space-between; margin-bottom: 28px">
                        <div style=" font-weight: bold">
                            <span style="font-weight: bold; font-family: sans-serif">
                                TỔNG ĐƠN HÀNG
                            </span>
                            <span style="font-weight: bold; font-family: sans-serif">
                                | @ViewBag.TongSoLuong SẢN PHẨM
                            </span>
                        </div>
                        <hr />
                        <div style="" class="table">
                            <table style="display: block; margin: 0 auto; width: 100%">
                                <tfoot style="display: block; vertical-align: middle">
                                    <tr style="display: flex; justify-content: space-between">
                                        <th style="font-weight: bold; font-family: sans-serif">TỔNG TIỀN</th>
                                        <th style="font-weight: bold; font-family: sans-serif">@String.Format("{0:0,0}", ViewBag.Tongtien)VNĐ</th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 20px; margin-bottom: 20px; padding-top: 1px; padding-bottom: 1px; height: 125px;">
                    <div style="margin-top: 16px">
                        <div>
                            @*@using (Html.BeginForm("Order", "ShoppingCart"))*@
                            @using (Html.BeginForm("Index", "Complete"))
                            {
                                <button style="background: #ff0000; border-color: #ff0000; color: #ffffff; width: 100%; display: block; min-height: 45px; line-height: 25px; font-weight: bold; padding: 8px 4px">ĐẶT HÀNG TRỰC TIẾP</button>
                            }
                        </div>
                    </div>
                    

                    <div style="margin-top: 16px">
                        <div>
                            @*@using (Html.BeginForm("Payment", "Home"))
                            {
                                THANH TOÁN QUA MOMO
                                            }*@
                            <button style="background: #ff0000; border-color: #ff0000; color: white; width: 100%; display: block; min-height: 45px; line-height: 25px; font-weight: bold; padding: 8px 4px"> @Html.ActionLink("Thanh toán momo", "Payment", "Home", new { price = ViewBag.Tongtien }, new { @class = "btn btn-outine success momo" })</ button >
</div>
                    </div>

                    <div style="margin-bottom: 16px">
                        <div>
                            @using (Html.BeginForm("Index1", "Product"))
                            {
                                <button style="margin-top: 16px; background: #ffffff; width: 100%; display: block; min-height: 45px; line-height: 25px; font-weight: bold; padding: 8px 4px ">TIẾP TỤC MUA SẮM</button>
                            }
                        </div>
                    </div>

                    <div style="margin-bottom: 16px">
                        <div>
                            @using (Html.BeginForm("Delete", "ShoppingCart"))
                            {
                                <button style="margin-top: 16px; background: #ffffff; width: 100%; display: block; min-height: 45px; line-height: 25px; font-weight: bold; padding: 8px 4px ">XÓA GIỎ HÀNG</button>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>